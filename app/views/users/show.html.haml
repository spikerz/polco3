- title "User Profile for #{@user.name.titlecase}"

- if @user.id == current_user.id || current_user.admin?
  %p= link_to "edit", edit_user_path(@user)

- if @user.email
  %p
    %b Email:
    = @user.email

%p
  %b Registration Date:
  #{@user.created_at.to_s(:db)}

- if @user.geocoded?
  %p
    %b State:
    = link_to @user.state.name, @user.state

  %p
    %b District:
    = link_to @user.district.name, @user.district

  %p
    %b Representative:
    = link_to @user.representative.full_name, @user.representative

  %p
    %b Senators:
  %ul
    - @user.senators.each do |sen|
      %li
        = link_to sen.full_name, sen

%h4 Groups

- if @user.custom_groups.size == 0 && @user.followed_groups.size == 0 && @user.common_groups.empty?
  %p
    You have zero groups (not even the default ones)
    = link_to "Geocode","/users/geocode"
- else
  - if @user.custom_groups.size > 0
    %h5 Joined Groups
    %table.table.table-striped
      %tr
        %th{style: "width:50%"} Name
        %th Members
      - @user.custom_groups.each do |g|
        %tr
          %td= link_to g.name, g
          %td= g.member_count

  - if @user.followed_groups.size > 0
    %h5 Followed Groups
    %table.table.table-striped
      %tr
        %th{style: "width:50%"} Name
        %th Members
      - @user.followed_groups.each do |g|
        %tr
          %td= link_to g.name, g
          %td= g.member_count

  - unless @user.common_groups.empty?
    %h5 Common Groups
    %table.table.table-striped
      %tr
        %th{style: "width:50%"} Name
        %th Members
      - @user.common_groups.each do |g|
        %tr
          %td= link_to g.name, g
          %td= g.member_count